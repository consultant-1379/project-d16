/////////////////////////////////////
// Checkboxes
/////////////////////////////////////
@import (reference, multiple) "../variables/global";

input[type="checkbox"] {
  position: absolute;
  width: 10px;
  margin: 5px -1px 0 0;
  background: transparent;
  border: transparent;
  opacity: 0;
  pointer-events: none;

  + label {
    font-size: @checkbox-font-size;
    line-height: @checkbox-line-height;

    &::before {
      .cbDefaults(0, 0);
      margin-right: @space-small;
    }

    &:empty {
      line-height: 1;

      &::before {
        margin-right: 0;
      }
    }
  }

  &:hover + label {
    &::before {
      .cbDefaults(0, 1);
    }
  }

  &:disabled + label {
    .disabled_mixin();
  }

  &:focus + label::before {
    outline: 1px solid @purple;
    outline-offset: 1px;
  }

  // Checked
  &:checked {
    + label {
      &::before {
        .cbDefaults(1, 0);
      }
    }

    &:hover + label {
      &::before {
        .cbDefaults(1, 1);
      }
    }

    &:disabled + label {
      .disabled_mixin();
    }
  }

  // Indeterminate
  &:indeterminate {
    + label::before {
      .cbDefaults(2, 0);
    }

    &:hover + label {
      &::before {
        .cbDefaults(2, 1);
      }
    }

    &:disabled + label {
      .disabled_mixin();
    }
  }
}

.checkbox-group {
  .validation-msg {
    display: none;
    margin-top: @space-base;
    font-size: @input-error-font-size;
    line-height: @input-error-line-height;
  }
}

// MIXINGS
.cbDefaults (@selected, @state) {
  content: " ";
  display: inline-block;
  width: @checkbox-icon-size;
  height: @checkbox-icon-size;
  vertical-align: text-top;
  & when (@selected = 2) {
    & when (@state = 1) {
      background: @checkbox-indeterminate-hover no-repeat 100% center;
    }
    & when (@state = 0) {
      background: @checkbox-indeterminate no-repeat 100% center;
    }
  }
  & when (@selected = 1) {
    & when (@state = 1) {
      background: @checkbox-selected-hover no-repeat 100% center;
    }
    & when (@state = 0) {
      background: @checkbox-selected no-repeat 100% center;
    }
  }
  & when (@selected = 0) {
    & when (@state = 1) {
      background: @checkbox-default-hover no-repeat 100% center;
    }
    & when (@state = 0) {
      background: @checkbox-default no-repeat 100% center;
    }
  }
}
