export class Sysbar {
  constructor(element) {
    this.dom = {
      sysbar: element,
      items: element.querySelectorAll('.item')
    };
    this.listeners = {
      click: this.toggleSyspanel.bind(this),
    };
    this.events = {
      toggleSyspanel: new CustomEvent('toggleSyspanel', {detail: document.querySelector('.settings')})
    };
  }

  init() {
    this.addEventListeners();
  }

  destroy() {
    this.removeEventListeners();
  }

  addEventListeners() {
    Array.from(this.dom.items).forEach(item => {
      if (item.classList.contains('settings-trigger')) {
        item.addEventListener('click', this.listeners.click);
      }
    });
  }

  removeEventListeners() {
    Array.from(this.dom.items).forEach(item => {
      if (item.classList.contains('settings-trigger')) {
        item.removeEventListener('click', this.listeners.click);
      }
    });
  }

  toggleSyspanel() {
    window.dispatchEvent(this.events.toggleSyspanel);
  }
}
