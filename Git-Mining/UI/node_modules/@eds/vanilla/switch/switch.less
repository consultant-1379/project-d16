@import (reference, multiple) "../variables/global";
/////////////////////////////////////
// Switch
/////////////////////////////////////

.switch {
  position: relative;
  display: inline-block;
  width: 28px;
  font-size: @switch-font-size;
  line-height: @switch-line-height;

  &:hover {
    cursor: default;

    input:not([disabled]) + .ball {
      background-color: @switch-off-background-hover;
      border-color: @switch-off-border-hover;
    }

    input:checked:not([disabled]) + .ball {
      background-color: @switch-on-background-hover;
      border-color: @switch-on-border-hover;
    }
  }

  span {
    display: block;
    margin-left: (@switch-width + @space-small);

    &::after {
      content: attr(data-disabled);
    }
  }

  input {
    position: absolute;
    margin: 0;
    padding: 0;
    height: 1px;
    width: 1px;
    overflow: hidden;
    clip: rect(1px, 1px, 1px, 1px);
    pointer-events: none;

    &:focus + .ball {
      outline: 1px solid @purple;
      outline-offset: 1px;
    }

    // selected
    // - ball holder
    &:checked + .ball {
      background-color: @switch-on-background;
      border-color: @switch-on-border;
    }

    // - label
    &:checked ~ span::after {
      content: attr(data-enabled);
    }

    // - ball
    &:checked + .ball::before {
      @px: (@switch-width - @switch-icon-size - 2px - 4px);
      -webkit-transform: translateX(@px);
      -ms-transform: translateX(@px);
      transform: translateX(@px);
      background-color: @switch-on-ball;
    }

    & ~ span,
    & ~ .ball {
      cursor: pointer;
    }

    &:disabled ~ span,
    &:disabled ~ .ball {
      .disabled_mixin();
    }
  }

  // ball-holder
  .ball {
    position: absolute;
    top: 2px; // (21px switch line-height - 16px ball-holder height) / 2
    left: 0;
    width: @switch-width;
    height: @switch-height;
    background-color: @switch-off-background;
    border: solid 1px @switch-off-border;
    border-radius: @switch-border-radius;
    transition: background-color .4s, transform .4s;

    // ball
    &::before {
      position: absolute;
      content: "";
      height: @switch-icon-size;
      width: @switch-icon-size;
      top: (@switch-height - @switch-icon-size - 2px) / 2;  // 2px borders
      left: (@switch-height - @switch-icon-size - 2px) / 2; // 2px borders
      background-color: @switch-off-ball;
      border-radius: 50%;
      transition: background-color .4s, transform .4s;
    }
  }
}
